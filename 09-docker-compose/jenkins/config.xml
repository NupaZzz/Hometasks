<?xml version='1.1' encoding='UTF-8'?>
<flow-definition plugin="workflow-job@1316.vd2290d3341a_f">
	<description/>
	<keepDependencies>false</keepDependencies>
	<properties/>
	<definition class="org.jenkinsci.plugins.workflow.cps.CpsFlowDefinition" plugin="workflow-cps@3731.ve4b_5b_857b_a_d3">
		<script>
			pipeline {
				agent any
				options {
					timestamps()
				}
				environment {
					BRANCH = &quot;master&quot;
					NEXUS_IP = &quot;192.168.100.100&quot;
					NEXUS_PORT = &quot;8081&quot;
					NEXUS_REPO_NAME = &quot;word-cloud-repo&quot;
					NEXUS_CREDS_ID = &quot;nexus-creds&quot;
					
				}
				stages {
					stage(&apos;Get rep&apos;) {
						steps {
							git branch: &quot;$BRANCH&quot;, url: &apos;https://github.com/NupaZzz/word-cloud-generator.git&apos;
						}
					}
					stage(&apos;make test&apos;) {
						steps {
 							sh &apos;make lint&apos;
							sh &apos;make test&apos;
						}
					}
					stage(&apos;build and upload&apos;) {
						steps {
							sh &apos;&apos;&apos;sed -i &quot;s/1.DEVELOPMENT/1.$BUILD_NUMBER/g&quot; static/version
								GOOS=linux GOARCH=amd64 go build -o ./artifacts/word-cloud-generator -v
								md5sum artifacts/word-cloud-generator
								gzip -f artifacts/word-cloud-generator
								ls -l artifacts/
							&apos;&apos;&apos;

							nexusArtifactUploader(
								nexusVersion: &apos;nexus3&apos;,
								protocol: &apos;http&apos;,
								nexusUrl: &quot;${NEXUS_IP}:${NEXUS_PORT}&quot;,
								groupId: &apos;pipeline&apos;,
								version: &apos;1.$BUILD_NUMBER&apos;,
								repository: &quot;${NEXUS_REPO_NAME}&quot;,
								credentialsId: &quot;${NEXUS_CREDS_ID}&quot;,
								artifacts: [
									[artifactId: &apos;word-cloud-generator&apos;,
									classifier: &apos;&apos;,
									file: &apos;artifacts/word-cloud-generator.gz&apos;,
									type: &apos;gz&apos;]
								]
							)
						}
					}
                }
            }
		</script>
		<sandbox>true</sandbox>
	</definition>
	<triggers/>
	<disabled>false</disabled>
</flow-definition>
